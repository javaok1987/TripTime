!function(e){"use strict";function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=o(e,t)?a:l;n(e,t)}var o,l,a;"classList"in document.documentElement?(o=function(e,t){return e.classList.contains(t)},l=function(e,t){e.classList.add(t)},a=function(e,t){e.classList.remove(t)}):(o=function(e,n){return t(n).test(e.className)},l=function(e,t){o(e,t)||(e.className=e.className+" "+t)},a=function(e,n){e.className=e.className.replace(t(n)," ")});var i={hasClass:o,addClass:l,removeClass:a,toggleClass:n,has:o,add:l,remove:a,toggle:n};"function"==typeof define&&define.amd?define(i):e.classie=i}(window),String.prototype.repeat=function(e){return new Array(Math.round(e)+1).join(this)},function(e){e.fn.addSliderSegments=function(){return this.each(function(){var t=e(this),n=t.slider("option"),o=(n.max-n.min)/n.step,l=n.orientation;if("vertical"===l){var a,i="";for(console.log(o),a=1;o-1>=a;a+1)i+='<div class="ui-slider-segment" style="top:'+100/o*a+'%;"></div>';t.prepend(i)}else{var s=100/o+"%",r='<div class="ui-slider-segment" style="margin-left: '+s+';"></div>';t.prepend(r.repeat(o-1))}})},jQuery(function(e){var t=e("#slider"),n=e("#walk-slider"),o=15;e(document).on("click",'a[href="#fakelink"]',function(e){e.preventDefault()}),e('[data-toggle="select"]').length&&e('[data-toggle="select"]').select2(),t.length>0&&t.slider({min:1,max:4,value:2,orientation:"horizontal",range:"min",slide:function(e,n){var l=n.value*o;t.find(".ui-slider-value:last").text(l+" 分鐘").data("slidervalue",l)}}).addSliderSegments(t.slider("option").max),e(".btn-group").on("click","a",function(){e(this).siblings().removeClass("active").end().addClass("active")}),n.length>0&&n.slider({min:1,max:4,value:2,orientation:"horizontal",range:"min",slide:function(e,t){var l=t.value*o;n.find(".ui-slider-value:last").text(l+" 分鐘").data("slidervalue",l)}}).addSliderSegments(n.slider("option").max),e('[data-toggle="checkbox"]').radiocheck(),e('[data-toggle="radio"]').radiocheck(),e('[data-toggle="switch"]').length&&e('[data-toggle="switch"]').bootstrapSwitch()})}(jQuery);var CustomControl=CustomControl||{};!function(e,t,n){e.optionDiv=function(e){var n=document.createElement("DIV");return n.className="dropDownItemDiv",n.title=e.title,n.id=e.id,n.innerHTML=e.name,t.event.addDomListener(n,"click",e.action),n},e.checkBox=function(e){var n=document.createElement("DIV");n.className="checkboxContainer",n.title=e.title;var o=document.createElement("SPAN");o.role="checkbox",o.className="checkboxSpan";var l=document.createElement("DIV");l.className="blankDiv",l.id=e.id,l.style.display="block",l.val=!0;var a=document.createElement("IMG");a.className="blankImg",a.src="http://maps.gstatic.com/mapfiles/mv/imgs8.png";var i=document.createElement("LABEL");return i.className="checkboxLabel",i.innerHTML=e.label,l.appendChild(a),o.appendChild(l),n.appendChild(o),n.appendChild(i),t.event.addDomListener(n,"click",function(){"block"===document.getElementById(l.id).style.display?(document.getElementById(l.id).style.display="none",e.val=!1):(document.getElementById(l.id).style.display="block",e.val=!0),e.action()}),n},e.separator=function(){var e=document.createElement("DIV");return e.className="separatorDiv",e},e.dropDownOptionsDiv=function(e){var t=document.createElement("DIV");t.className="dropDownOptionsDiv",t.id=e.id;for(var n=0;n<e.items.length;n++)t.appendChild(e.items[n]);return t},e.dropDownControl=function(e){var n=document.createElement("DIV");n.className="container";var o=document.createElement("DIV");o.className="dropDownControl",o.innerHTML=e.name,o.id=e.name;var l=document.createElement("IMG");l.src="http://maps.gstatic.com/mapfiles/arrow-down.png",l.className="dropDownArrow",o.appendChild(l),n.appendChild(o),n.appendChild(e.dropDown),e.gmap.controls[e.position].push(n),t.event.addDomListener(n,"click",function(){"block"===document.getElementById("myddOptsDiv").style.display?document.getElementById("myddOptsDiv").style.display="none":document.getElementById("myddOptsDiv").style.display="block",setTimeout(function(){document.getElementById("myddOptsDiv").style.display="none"},1500)})},e.buttonControl=function(e){var n=document.createElement("DIV");return n.innerHTML=e.name,n.className="button",n.index=1,e.gmap.controls[e.position].push(n),t.event.addDomListener(n,"click",e.action),n}}(CustomControl,google.maps,window);var IanToolkit=IanToolkit||{};!function(e,t,n){var o={};return function(){o.log=function(e){console&&console.log(e)},t.ajaxSetup({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",statusCode:{404:function(){}},timeout:2e3,error:function(e,t,n){},success:function(e,t,n){}})}(),e.ajax={sendRequest:function(e,n,o){t.ajax({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",url:e,data:JSON.stringify(n)}).done(o)}},e}(IanToolkit,jQuery,window),function(e,t,n,o){function l(){var e={zoom:12,center:new google.maps.LatLng(25.0372264,121.506378),disableDefaultUI:!0,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_CENTER},styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}]};a=new google.maps.Map(document.getElementById("map-canvas"),e);var t="img/map-marker.png",o=new google.maps.LatLng(25.0372264,121.506378),l=new google.maps.Marker({position:o,map:a,icon:t});google.maps.event.addListener(a,"idle",function(){l.setPosition(a.getCenter()),console.log(a.getCenter().toString())});var i={gmap:a,title:"heatMap 圖層開關",id:"heatMapCtrl",label:"HeatMap",action:function(){console.log(this.val),console.log("clicked check HeatMapCtrl")}},s=new n.checkBox(i),r={gmap:a,title:"GeoJson 圖層開關",id:"geoJsonCtrl",label:"GeoJson",action:function(){console.log(this.val),console.log("clicked check GeoJsonCtrl")}},c=new n.checkBox(r),d=(new n.separator,{items:[s,c],id:"myddOptsDiv"}),m=new n.dropDownOptionsDiv(d),p={gmap:a,name:"圖層",id:"mapControl",title:"A custom drop down select with mixed elements",position:google.maps.ControlPosition.TOP_RIGHT,dropDown:m};new n.dropDownControl(p)}var a,i=e("#slider"),s=(e("#walk-slider"),{fromtime:e("#select-form-time")}),r=e("#article-conveyance"),c={search:e("#btn-search")},d=e("#menu-toggle-close"),m=e("#menu-toggle-open"),p=(e("#wrapper"),e("#footer"));jQuery(function(e){FastClick.attach(document.body),e(window).resize(function(e){google.maps.event.trigger(a,"resize")}),d.on("click",function(e){e.preventDefault(),p.slideUp("slow")}),m.on("click",function(e){e.preventDefault(),p.slideDown("slow")}),c.search.on("click",function(){var e="搭乘時間: "+i.find(".ui-slider-value:last").data("slidervalue")+"\n開始時間: "+s.fromtime.val();console.log(e)}),e(".iui-overlay").find(".btn-close").on("click",function(){o.addClass(document.getElementById("overlay"),"hidden"),l()}),e("#weekly").find("button").on("click",function(){console.log(e(this).text())}),r.find('[data-toggle="checkbox"]').on("change.radiocheck",function(t){var n=e(this);console.log(n.prop("checked")),console.log(n.prop("id"))})})}(jQuery,IanToolkit,CustomControl,classie);