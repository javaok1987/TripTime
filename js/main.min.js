"use strict";String.prototype.repeat=function(e){return new Array(Math.round(e)+1).join(this)},function(e){e.fn.addSliderSegments=function(){return this.each(function(){var t=e(this),o=t.slider("option"),n=(o.max-o.min)/o.step,l=o.orientation;if("vertical"===l){var a,i="";for(console.log(n),a=1;n-1>=a;a+1)i+='<div class="ui-slider-segment" style="top:'+100/n*a+'%;"></div>';t.prepend(i)}else{var s=100/n+"%",r='<div class="ui-slider-segment" style="margin-left: '+s+';"></div>';t.prepend(r.repeat(n-1))}})},jQuery(function(e){var t=e("#slider"),o=e("#walk-slider"),n=15;e('[data-toggle="select"]').length&&e('[data-toggle="select"]').select2(),t.length>0&&t.slider({min:1,max:4,value:2,orientation:"horizontal",range:"min",slide:function(e,o){var l=o.value*n;t.find(".ui-slider-value:last").text(l+" 分鐘").data("slidervalue",l)}}).addSliderSegments(t.slider("option").max),o.length>0&&o.slider({min:1,max:4,value:2,orientation:"horizontal",range:"min",slide:function(e,t){var l=t.value*n;o.find(".ui-slider-value:last").text(l+" 分鐘").data("slidervalue",l)}}).addSliderSegments(o.slider("option").max),e('[data-toggle="checkbox"]').radiocheck(),e('[data-toggle="radio"]').radiocheck(),e('[data-toggle="switch"]').length&&e('[data-toggle="switch"]').bootstrapSwitch()})}(jQuery);var CustomControl=CustomControl||{};!function(e,t,o){e.optionDiv=function(e){var o=document.createElement("DIV");return o.className="dropDownItemDiv",o.title=e.title,o.id=e.id,o.innerHTML=e.name,t.event.addDomListener(o,"click",e.action),o},e.checkBox=function(e){var o=document.createElement("DIV");o.className="checkboxContainer",o.title=e.title;var n=document.createElement("SPAN");n.role="checkbox",n.className="checkboxSpan";var l=document.createElement("DIV");l.className="blankDiv",l.id=e.id;var a=document.createElement("IMG");a.className="blankImg",a.src="http://maps.gstatic.com/mapfiles/mv/imgs8.png";var i=document.createElement("LABEL");return i.className="checkboxLabel",i.innerHTML=e.label,l.appendChild(a),n.appendChild(l),o.appendChild(n),o.appendChild(i),t.event.addDomListener(o,"click",function(){"block"===document.getElementById(l.id).style.display?(document.getElementById(l.id).style.display="none",e.val=!1):(document.getElementById(l.id).style.display="block",e.val=!0),e.action()}),o},e.separator=function(){var e=document.createElement("DIV");return e.className="separatorDiv",e},e.dropDownOptionsDiv=function(e){var t=document.createElement("DIV");t.className="dropDownOptionsDiv",t.id=e.id;for(var o=0;o<e.items.length;o++)t.appendChild(e.items[o]);return t},e.dropDownControl=function(e){var o=document.createElement("DIV");o.className="container";var n=document.createElement("DIV");n.className="dropDownControl",n.innerHTML=e.name,n.id=e.name;var l=document.createElement("IMG");l.src="http://maps.gstatic.com/mapfiles/arrow-down.png",l.className="dropDownArrow",n.appendChild(l),o.appendChild(n),o.appendChild(e.dropDown),e.gmap.controls[e.position].push(o),t.event.addDomListener(o,"click",function(){"block"===document.getElementById("myddOptsDiv").style.display?document.getElementById("myddOptsDiv").style.display="none":document.getElementById("myddOptsDiv").style.display="block",setTimeout(function(){document.getElementById("myddOptsDiv").style.display="none"},1500)})},e.buttonControl=function(e){var o=document.createElement("DIV");return o.innerHTML=e.name,o.className="button",o.index=1,e.gmap.controls[e.position].push(o),t.event.addDomListener(o,"click",e.action),o}}(CustomControl,google.maps,window);var IanToolkit=IanToolkit||{};!function(e,t){var o={};!function(){o.log=function(e){console&&console.log(e)},$.ajaxSetup({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",statusCode:{404:function(){}},timeout:2e3,error:function(e,t,o){},success:function(e,t,o){}})}(),e.overlay={hide:function(e){document.getElementById(""+e).className+=" hidden"},show:function(e){var t=document.getElementById(""+e);t.classList?t.classList.remove("hidden"):t.className=t.className.replace(new RegExp("(^|\\b)hidden(\\b|$)","gi")," ")}},e.ajax={sendRequest:function(e,t,o){$.ajax({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",url:e,data:JSON.stringify(t)}).done(o)}}}(IanToolkit,window),function(e,t,o){var n,l=e("#slider"),a=(e("#walk-slider"),{fromtime:e("#select-form-time")}),i=e("input[name=conveyance]:checked"),s={search:e("#btn-search")},r=e("#menu-toggle-close"),c=e("#menu-toggle-open"),d=(e("#wrapper"),e("#footer"));jQuery(function(e){FastClick.attach(document.body),e(window).resize(function(e){google.maps.event.trigger(n,"resize")}),r.on("click",function(e){e.preventDefault(),d.slideUp("slow")}),c.on("click",function(e){e.preventDefault(),d.slideDown("slow")}),s.search.on("click",function(){var e="搭乘時間: "+l.find(".ui-slider-value:last").data("slidervalue")+"\n交通工具: "+i.val()+"\n開始時間: "+a.fromtime.val();console.log(e)}),e(".iui-overlay").find(".btn-close").on("click",function(){t.overlay.hide("overlay"),t.overlay.show("overlay-weekly"),m()}),e("#overlay-weekly").find("button").on("click",function(){t.overlay.hide("overlay-weekly"),console.log(e(this).text())})});var m=function(){var e=[{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}];n=new google.maps.Map(document.getElementById("map-canvas"),{zoom:12,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]},panControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,maxZoom:16,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_CENTER},center:new google.maps.LatLng(25.0372264,121.506378)}),n.mapTypes.set("map_style",new google.maps.StyledMapType(e,{name:"Styled Map"})),n.setMapTypeId("map_style");var t={gmap:n,title:"heatMap 圖層開關",id:"heatMapCtrl",label:"HeatMap",action:function(){console.log("clicked check HeatMapCtrl")}},l=new o.checkBox(t),a={gmap:n,title:"GeoJson 圖層開關",id:"geoJsonCtrl",label:"GeoJson",action:function(){console.log(this.val),console.log("clicked check GeoJsonCtrl")}},i=new o.checkBox(a),s=(new o.separator,{items:[l,i],id:"myddOptsDiv"}),r=new o.dropDownOptionsDiv(s),c={gmap:n,name:"圖層",id:"mapControl",title:"A custom drop down select with mixed elements",position:google.maps.ControlPosition.TOP_RIGHT,dropDown:r};new o.dropDownControl(c)}}(jQuery,IanToolkit,CustomControl);